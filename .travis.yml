language: swift
osx_image: xcode10.1
cache:
  bundler: true

branches:
  only:
    - master
    - develop
    - /^hotfix.*$/
    - /^feature.*$/  

env:
  global:
    - LC_CTYPE=en_US.UTF-8
    - LANG=en_US.UTF-8
    - PROJECT=DangerPOC.xcodeproj
    - SCHEME="DangerPOC"

  matrix:
    - DESTINATION="OS=12.1,name=iPhone XR"                   

before_install: 
  - gem install bundler

install: 
  - bundle install
  - gem install slather -N
  - gem install danger
  - gem install coveralls
  - gem xcov
  - gem slather
  - gem xcpretty
  - gem danger-xcov
  - gem danger-commit_lint

jobs:
  include:
    - stage: Clean-Build-Tests
      script: 
        - bash Script/run-test.sh

after_success: 
  - bash Script/coveralls.sh 

notifications:
  email:
    on_success: never





  